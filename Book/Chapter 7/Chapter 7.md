# Chapter 7. 고급 컴포넌트와 라우팅

## 7.1 슬롯 사용

컴포넌트를 사용할 때, 컴포넌트에 데이터를 전달하기 위해 보통 부모 콘텐츠와 자식 콘텐츠를 엮어야 할 때가 있다.

컴포넌트를 사용할 때 시작과 끝 내그 사이에는 콘텐츠를 추가할 수 없다.

콘텐츠를 보여 줄 수 있는 가장 쉬운 방법은 슬롯 요소를 사용하는 것이다.  
이는 Vue의 slot 요소를 사용하면 된다.  
슬롯 요소는 Vue.js에서 컴포넌트의 시작과 끝 태그 사이에 추가된 데이터를 어딘가에 표시해야 할 때 사용하는 특별한 태그다.  
다른 자바스크립트 프레임워크에서는 이러한 과정을 content distribution(콘텐츠 분배)이라고도 한다.

- parent-child.html
- parent-child-slots-extract.html

## 7.2 지정 슬롯 살펴보기

지정 슬롯은 일반 슬롯과 같지만, 컴포넌트 안에 구체적으로 배치할 수 있다는 점이 다르다.  
이름 없는 슬롯과 다르게 컴포넌트에 여러 지정 슬롯을 가질 수 있다.  
해당 지정 슬롯을 컴포넌트의 원하는 곳에 어디든지 배치할 수 있다.  
추가하려면 먼저 자식 컴포넌트 안의 어느 곳에 추가할지 정의해야 한다.

지정 슬롯은 다양한 곳에서 쉽게 요소를 부모에서 자식 컴포넌트로 추가할 수 있게 한다.

- named-slots.html

## 7.3 범위 슬롯

범위 슬롯은 지정 슬롯과 비슷하지만, 데이터를 넘겨줄 수 있는 재활용 가능한 템플릿에 더 가깝다.  
범위 슬롯을 사용하려면 slot-scope라는 특별한 요소를 이용하는 템플릿 요소를 써야 한다.  

slot-scope 요소는 컴포넌트로 넘겨받은 속성을 담고 있는 일시적인 변수다.  
자식 컴포넌트로 값을 넘겨주는 대신 자식 컴포넌트에서 다시 부모로 값을 넘겨줄 수 있다.

- name-scoped-slots.html

## 7.4 동적 컴포넌트 앱 생성

Vue.js의 또 다른 강력한 기능은 동적 컴포넌트이다.  
해당 기능은 예약된 \<component> 요소와 is 속성을 사용해서 여러 컴포넌트를 동적으로 변경할 수 있게 한다.

데이터 함수 내에 어떤 컴포넌트가 표시될 지 결정하는 속성을 만들 수 있다.  
그러려면 템플릿에서 우리가 생성한 데이터 속성을 가리키는 is 속성을 갖는 컴포넌트 요소를 생성해야 한다.

- dynamic-components.html

## 7.5 비동기 컴포넌트 설정

대형 애플리케이션을 제작하다 보면 앱을 더 작은 컴포넌트로 분리하거나 필요할 때만 앱 일부를 불러와야 할 때가 있다.  
이때 Vue의 비동기 컴포넌트를 사용하면 쉽게 해결할 수 있다.  
각 컴포넌트는 비동기적으로 컴포넌트를 반환하는 함수를 정의할 수 있고, Vue.js는 나중에 재렌더링할 경우를 위해 결과를 캐시로 저장한다.

비동기 컴포넌트를 만들 때 가장 중요한 점은 해결과 거절 콜백을 포함한 함수로 정의해야 한다는 것이다.  
콜백이 해결되거나 거절됨에 따라 다른 행동을 하도록 할 수 있다.

- async-components.html

## 7.6 Vue-CLI를 사용하여 애완용품샵 앱 변환

애플리케이션을 분리하는 방법 중 가장 강력한 방법은 단일 파일 컴포넌트를 사용하는 것이다.  
단일 파일 컴포넌트를 사용할 때 가장 중요한 이점은 컴포넌트 범위 CSS 기능, 구문 강조 기능, 재사용 용이성, ES6 모듈 사용이다.

컴포넌트의 범위 CSS는 컴포넌트 단위별로 CSS를 지정할 수 있다.  
이는 컴포넌트별로 특정한 스타일을 정하기 쉽게 한다.  
ES6 모듈을 서드파티 라이브러리를 사용하기 쉽게 한다.

단일 파일 컴포넌트를 최대한 활용하려면 모든 모듈과 종속성을 번들하는 데 도움을 주는 웹팩 같은 빌드 도구를 사용해야 한다.  
또 자바스크립트를 번역하는 바벨같은 도구를 사용할 수 있으므로 모든 웹 브라우저에서 호환성을 보장할 수 있다.  
Vue.js는 이러한 과정을 더 쉽게 하는 Vue-CLI를 제공한다.

Vue-CLI는 Vue.js 애플리케이션을 시작하는 데 도움이 되는 스캐폴딩 도구이다.  
애플리케이션을 시작하는 데 필요한 모든 것을 포함하고 있다.

가장 일반적인 Vue-CLI 템플릿 목록

- 웹팩: Vue 로더, 핫 리로드, 린팅 테스트 및 CSS 추출 등 모든 기능을 가진 웹팩 도구
- 웹팩-심플: 빠른 프로토타이핑을 위한 일반 웹팩 + Vue 로더
- 브라우저리파이: 핫 리로드, 린팅, 유닛 테스팅을 포함한 일반 브라우저리파이 + 뷰티파이 설정
- 브라우저리파이-심플: 빠른 프로토타이핑을 위한 일반 브라우저리파이 + 뷰티파이 설정
- pwa: 웹팩 기반의 PWA(혁신적 웹 애플리케이션) 템플릿
- 심플: 단일 HTML 파일로 만드는 가장 간단한 Vue 설정

### 7.6.1 Vue-CLI로 새로운 애플리케이션 생성

### 7.6.2 라우트 설정

Vue-CLI에는 고급 라우팅 라이브러리이자 Vue.js 공식 라우터인 vue-router가 있다.  
경로 매개변수, 질의 매개변수, 와일드카드를 포함한 다양한 기능을 제공한다.  
또 HTML5 히스토리 모드와 인터넷 익스플로러 9의 자동 복구 기능이 포함된 해시 모드가 잇다.

routes/index.js의 경로 배열의 모든 객체에는 경로와 컴포넌트가 있다.  
경로는 웹 브라우저 안에서 방문할 때 필요한 URL이다.  
컴포넌트는 해당 경로에서 사용할 컴포넌트 이름이다.

이름 속성을 추가할 수도 있다.  
이름은 경로를 나타낸다.  
Props는 또 다른 선택적 속성이다.  
이는 Vue.js에 컴포넌트가 받아야 할 속성이 있는지 말해준다.

컴포넌트를 참조할 때는 항상 해당 컴포넌트를 불러와야 한다.  
기본적으로 Vue-CLI는 ES6의 임포트 스타일을 사용한다.  
컴포넌트를 불러오지 않으면 콘솔에 에러를 출력한다.

마지막으로 vue-router는 라우팅에 해시를 사용한다.  
웹 브라우저는 form으로 이동할 때 Vue는 URL을 /form이 아닌 #/form 형태로 만든다.  
라우터에 mode: 'history'를 추가하면 해당 기능을 끌 수 있다.

### 7.6.3 애플리케이션에 CSS, Bootstrap, Axios 추가

CSS를 추가하는 여러 방법이 있다.  
CSS 추가하는 방법 중 하나는 각 컴포넌트에 범위를 지정하는 것이다.  
어떤 컴포넌트에 맞는 CSS를 추가하고자 할 때 유용하다.

또 웹 사이트 전반에 사용할 CSS를 지정하는 것이다.

### 7.6.4 컴포넌트 설정

컴포넌트를 사용하면 애플리케이션을 재활용 가능한 부분으로 분리하기 편리하다.

대부분의 .vue 파일은 간단한 형태를 따라간다.  
파일의 맨 상단에는 보통 템플릿이 있다.  
템플릿의 시작과 끝은 \<template> 태그로 감싸고 있으며, 템플릿 태그 다음에는 루트 요소를 포함해야 한다.

템플릿 다음에는 \<script> 태그다.  
여기서 Vue 인스턴스를 생성한다.

\<script> 태그 다음에는 \<style> 태그가 오는데, 여기서 CSS 코드를 선택적으로 추가하거나 컴포넌트에 범위를 지정할 수 있다.

router-link 요소는 경로 간의 Vue.js 애플리케이션 안에 내부 링크를 생성한다.  
\<router-link> 태그는 to 속성을 가지고 있으며, 해당 속성이 지정된 경로에 연결할 수 있다.

### 7.6.5 Form 컴포넌트 생성

### 7.6.6 Main 컴포넌트 추가

CLI를 사용할 때 에셋 폴더 혹은 정적 폴더에 파일을 저장할 수 있다.  
에셋 파일은 웹팩의 url-loader와 file-loader로 처리된다.  
에셋은 빌드 중에 인라인, 복사, 이름 변경이 가능하지만 본질적으로는 소스 코드와 같다.  
에셋 폴더에서 파일을 참조할 때마다 상대 경로를 사용한다.

정적 파일은 웹팩에서 처리하지 않고 최종 목적지로 바로 복사된다.  
해당 파일을 참조할 때는 절대 경로를 사용해야 한다.

## 7.7 라우팅

Vue.js 같은 단일 페이지 애플리케이션에서는 라우팅이 앱에서 이동을 도와준다.

### 7.7.1 매개변수가 있는 상품 경로 추가