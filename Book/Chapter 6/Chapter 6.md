# Chapter 6. 컴포넌트 사용

## 6.1 컴포넌트란?

Vue.js에서 컴포넌트는 코드 베이스를 줄이고 단순화하는 강력한 구성 요소이다.  
대부분의 Vue.js 앱은 하나 이상의 컴포넌트로 이루어져 있다.  
컴포넌트로 코드에서 반복되는 부분을 가져와 이해하기 쉬운 작은 논리적 부분으로 분리할 수 있다.  
각 컴포넌트는 애플리케이션 내에서 재사용할 수 있다.  
컴포넌트는 단일 요소를 이용하여 접근할 수 있는 요소의 집합체로 정의한다.

## ### 6.1.1 컴포넌트 생성

Vue.js는 지역 혹은 전역으로 컴포넌트를 등록할지에 대한 선택권을 제공한다.  
전역 컴포넌트는 애플리케이션 전체에서 사용 가능하고, 전역 컴포넌트는 컴포넌트가 생성된 Vue.js 인스턴스 내에서만 사용할 수 있다.

### 6.1.2 전역 등록

전역 컴포넌트를 생성하려면 컴포넌트를 Vue 인스턴스 앞에 배치해야 한다.

컴포넌트에 정보를 표시하려면 템플릿 속성을 추가해야 한다.  
템플릿은 HTML이 있는 곳이다.  
모든 템플릿은 태그로 감싸야 한다.

컴포넌트가 제대로 렌더링되기 위해서는 컴포넌트를 부모 템플릿에 추가해야 한다.

- global-component-example.html

### 6.1.3 지역 등록

지역 등록은 Vue 인스턴스 하나로 범위를 제한한다.  
지역 등록은 컴포넌트의 인스턴스 옵션과 함께할 수 있다.  
컴포넌트가 지역적으로 등록되고 난 후에는 등록한 Vue 인스턴스만 해당 컴포넌트에 접근할 수 있다.

컴포넌트 인스턴스 옵션은 해당 Vue 인스턴스에서 필요한 모든 컴포넌트를 선언한다.  
각 컴포넌트는 키-값 쌍을 가진다.  
키는 항상 부모 템플릿에서 나중에 참조할 컴포넌트 이름이다.  
값은 컴포넌트 정의이다.  
Component는 컴포넌트를 정의하는 const 변수이다.

- local-component-example.html

## 6.2 컴포넌트의 관계

각 컴포넌트는 자체 분리된 범위가 있어 부모 데이터에 직접 접근할 수 없다.  
Vue.js에서 전달된 데이터를 props라고 한다.  
자식 컴포넌트는 각각 명시적으로 props 옵션을 사용해서 받아야 할 속성을 명시해야 한다.  
이 옵션은 Vue.js 인스턴스에 있고 props: ['comment']처럼 배열 형태를 포함한다.

컴포넌트는 단방향 데이터 바인딩을 형성한다.  
부모가 속성을 업데이트하면 속성은 자식 컴포넌트로 흘러가지만, 반대로는 흐르지 않는다.  
이는 중요한 차이점으로, 실수로 자식이 부모 상태를 바꾸는 것을 방지한다.

모든 값은 참조로 전달된다.  
객체나 배열이 자식 내에서 변경되면, 이는 부모 상태에 영향을 준다.  
이는 항상 원하는 결과가 아니기 때문에 미리 방지해야 한다.

## 6.3 속성을 사용해서 데이터 전달

속성은 단방향 통신에만 사용되며, 부모에게만 할당할 수 있는 변수이다.

또 속성은 유효성을 검사할 수 있다.
전달된 값이 특정 타입의 유효성 검사를 따르는지 확인할 수 있다.

### 6.3.1 리터럴 속성

가장 쉬운 속성 타입은 리터럴 속성이다.
이 속성은 컴포넌트에 전달할 수 있는 단순 문자열이다.

- literal-props.html

### 6.3.2 동적 속성

동적 속성은 변경될 수 있는 속성을 가지고 있는 부모에게서 전달받은 속성이다.
v-bind 지시자를 사용해서 올바르게 전달되었는지 확인할 수 있다.

- dynamic-props.html
- dynamic-props-counter.html
- dynamic-props-counter-correct.html

### 6.3.3 속성 검증

Vue.js는 부모에게 받은 속성의 유효성 여부를 검증하는 '속성 검증' 기능이 있다.

Vue.js는 다음 속성 타입에 대한 순수 생성자를 제공한다.

- 문자열
- 숫자
- 불
- 함수
- 객체
- 배열
- 기호

속성 배열인 ['nameofProp']를 만드는 대신 객체를 생성한다.  
각 객체 이름의 속성을 따라간다.  
그리고 타입을 지정하기 위해 새로운 객체를 생성한다.  
타입으로는 필수 또는 기본값을 추가할 수 있다.  
기본값은 속성에 아무 값도 전달되지 않았을 때의 값을 의미한다.  
속성 타입이 객체라면 반드시 기본값이 할당되어야 한다.  
필수 속성은 템플릿에서 컴포넌트가 생성될 때 필요한 속성이다.

짝수 속성은 커스텀 유효성 검사자라고도 하는데, 짝수인지 아닌지를 검사한다.  
커스텀 검사자는 모든 타입의 함수를 수행할 수 있다.  
한 가지 규칙이라면 참 혹은 거짓을 반환해야 한다는 점이다.

또 단일 콜론은 v-bind의 약자이다.  
이는 v-on의 약자가 기호(@)와 같은 방식이다.

- props-example.html

## 6.4 템플릿 컴포넌트 정의

### 6.4.1 인라인 템플릿 문자열 사용

템플릿 작업을 할 때 가장 쉬운 방법 중 하나는 인라인으로 사용하는 것이다.  
이 작업을 하려면 템플릿 정보가 부모 템플릿에 추가될 때 컴포넌트 안에 템플릿 정보를 포함해야 한다.

인라인 템플릿을 사용할 때 한 가지 단점은 나머지 컴포넌트 정의에서 템플릿을 분리한다는 것이다.

- inline-component-example.html

### 6.4.2 text/x-template 스크립트 요소

컴포넌트의 템플릿을 정의하는 다른 방법으로는 text/x-template 스크립트 요소를 사용하는 것이다.  
이 경우 스크립트 태그의 타입을 text/x-template으로 생성한다.

하지만 또다시 인라인 템플리에서와 동일한 문제에 부딪힌다.  
가장 큰 문제는 템플릿에서 컴포넌트 정의를 분리한다는 것이다.

- x-template-example.html

### 6.4.3 단일 파일 컴포넌트

ES2015 템플릿 리터럴을 사용하면 문자열을 사용할 때 발생한 몇몇 문제점을 제거할 수 있다.  
ES2015는 문자열을 백 틱(`)으로 감싸 주면 템플릿 리터럴이 된다.  
템플릿 리터럴은 이스케이프할 필요 없이 여러 줄이 될 수 있다.  
내부에 삽입 식을 넣을 수도 있다.

그런데도 ES2015 템플릿 리터럴에는 몇몇 문자열과 동일한 문제점이 있다.  
컴포넌트 정의가 아직도 조금 복잡하고 몇몇 개발 환경에서는 구문 강조를 지원하지 않는다.  
이러한 문제점을 바로잡을 수 있는 옵션이 하나 더 있는데, 바로 단일 파일 컴포넌트이다.

단일 파일 멈포넌트는 템플릿과 정의를 하나의 .vue 파일로 합쳐 준다.  
각 컴포넌트는 각각의 범위를 가지며, 모든 컴포넌트에 유일한 이름을 지을 필요도 없다.  
CSS 또한 각 컴포넌트의 범위를 가지는데, 대형 애플리케이션에서 굉장히 유용하다.

- single-file-component.vue

## 6.5 커스텀 이벤트

Vue.js는 고유한 이벤트 인터페이스가 있다.  
일반적인 이벤트와 다르게 커스텀 이벤트는 부모에서 자식 컴포넌트로 이벤트를 넘겨줄 때 사용한다.  
이벤트 인터페이스는 $on(이벤트 이름)을 사용하여 이벤트를 수신하고, $emit(이벤트 이름)을 사용하여 이벤트를 트리거한다.  
일반적으로 $on(이벤트 이름)은 부모 자식 관계가 아닌 컴포넌트 간에 이벤트를 송신하는 데 사용한다.  
부모와 자식 이벤트는 v-on 지시자를 사용해야 한다.  
해당 인터페이스를 사용하면 부모 컴포넌트가 직접 자식 컴포넌트에서 이벤트를 수신할 수 있다.

### 6.5.1 이벤트 수신

- event-listen.html

### 6.5.2 .sync를 사용해서 자식 속성 변경

대부분의 상황에서 자식 컴포넌트가 부모 속성을 변경하면 안 된다.  
부모가 자식 속성을 변경하는 것이 더 낫다.

.sync 변경자는 자식 컴포넌트 안에서 부모 컴포넌트 값을 변경할 수 있게 한다.

.sync 변경자는 컴포넌트의 아무 속성에나 붙일 수 있다.

.sync 변경자는 <my-component :my-counter="counter" @update:my-counter="val"=>bar=val">\</my-component>의 문법적 설탕이다.  
생성된 새로운 이벤트는 update라고 한다.  
해당 이벤트는 my-counter 속성을 받아 전달받은 변수에 할당한다.

## 6.6 연습 문제

## 6.7 요약

- 컴포넌트 지역 등록은 지역 범위를 가진다.
  새로운 Vue 인스턴스를 만들 때 컴포넌트 옵션을 사용하여 생성할 수 있다.
- 컴포넌트 전역 등록은 컴포넌트를 정의하는 곳에서 Vue.components 인스턴스 연산자를 사용한다.
- 컴포넌트는 부모와 자식 컴포넌트 간 단방향 데이터 바인딩을 사용한다.
- 컴포넌트에서 속성은 전달받을 수 있는 것을 정의하려고 사용한다.
- 단일 파일 컴포넌트는 모든 템플릿과 스크립트 정보를 파일 하나로 결합한다.
- $emit을 사용해서 부모 컴포넌트에 정보를 보낼 수 있다.