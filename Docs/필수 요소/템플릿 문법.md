# 템플릿 문법

Vue.sj는 렌더링 된 DOM을 컴포너트 인스턴스의 데이터에 선언적으로 바인딩할 수 있는 HTML 기반 템플릿 구문을 사용한다.

내부적으로 Vue는 템플릿을 **가상 DOM** 렌더링 함수로 컴파일한다.  
Vue 앱 상태가 변경되면 가상 DOM과 변경된 DOM을 비교하여 다시 렌더링할 최소한의 컴포넌트를 지능적으로 파악하여 DOM 조작을 최소화한다.

가상 DOM 개념에 익숙하고 JavaScript 본래의 기능을 선호한다면, 템플릿 대신 렌더 함수를 직접 작성할 수 있으며, 선택사항으로 JSX를 지원한다.

## 보간법(Interpolation)

### 문자열

데이터 바인딩의 가장 기본 형태는 "**Mustache**" 기법을 사용한 문자열 보간법이다.

```html
<span>메시지: {{ msg }}</span>
```

**v-once** 디렉티브를 사용하여 데이터가 변경되어도 갱신되지 않는 일회성 보간을 수행할 수 있다. 

### 원시 HTML

이중 중괄호는 데이터를 HTML이 아닌 일반 텍스트로 해석하기 때문에 실제 HTML을 출력하려면 **v-html** 디렉티브를 사용해야 한다.

> 웹사이트에서 임의의 HTML을 동적으로 렌더링하면 XSS 취약점으로 이어질 수 있다.
> 따라서 HTML 보간법은 반드시 신뢰할 수 있는 콘텐츠에서만 사용해야 한다.

### 속성

Mustaches는 HTML 속성에 사용할 수 없다.  
대신 **v-bind** 디렉티브를 사용하면 된다.

*v-bind의 값이 boolean 속성인 경우 다르게 작동한다.*

### JavaScript 표현식 사용

데이터 바인딩 내에서 JavaScript 표현식을 사용할 수도 있다.

하지만 각 바인딩은 하나의 단일 표현식만 포함해야 하는 제한이 있으므로 다음과 같이 작성하면 작동하지 않는다.

```html
{{ var a = 1 }}
{{ if(ok) { return messsage } }}
```

## 디렉티브

디렉티브는 v- 로 시작하는 특수한 속성이다.  
디렉티브 속성 값은 단일 JavaScript 표현식이 된다.  
디렉티브의 역할은 표현식의 값이 변경될 때 발생하는 부수 효과들을 반응적으로 DOM에 적용하는 것이다.

### 전달인자

일부 디렉티브는 디렉티브명 뒤에 콜론으로 표기되는 전달인자를 가질 수 있다.

```html
<a v-bind:href="url">...</a>
```

여기서 href는 전달인자로, v-bind 디렉티브가 표현식 url의 값을 엘리먼트의 href 속성에 바인딩하도록 지시한다.

### 동적 전달인자

JavaScript 표현식을 대괄호로 묶어 디렉티브 전달인자로 사용할 수도 있다.

```html
<a v-bind:[attributeName]="url">...</a>
```

여기서 attributeName은 JavaScript 표현식으로 동적 변환되며, 변환된 결과는 전달인자의 최종값으로 사용된다.

### 수식어

수식어는 점으로 표기되는 특수 접미사로, 디렉티브를 특별한 방법으로 바인딩해야 함을 나타낸다.  
예를 들어 .prevent 수식어는 v-on 디렉티브가 트리거된 이벤트에서 event.preventDefault()를 호출하도록 지시한다.

## 약어

v- 접두어는 템플릿에서 Vue 특정 속성을 식별하기 위한 시각적 신호 역할을 한다.  
Vue.js가 모든 템플릿을 관리하는 SPA를 구축하게 되면 v- 접두어의 필요성이 줄어든다.  
(Vue가 모든 속성을 관리하기 때문에 v- 접두어를 붙이지 않아도 Vue가 관리하는 속성이라는 것을 알 수 있기 때문에)  
따라서 가장 자주 사용되는 두 개의 디렉티브 v-bind와 v-on에 대한 특별한 약어를 제공한다.

### v-bind 약어

```html
<a v-bind:href="url">...</a>
<a :href="url">...</a>
<a :[key]="url">...</a>
```

### v-on 약어

```html
<a v-on:click="doSomething">...</a>
<a @click="doSomething">...</a>
<a @[event="doSomething">...</a>
```

### 주의사항

##### 동적 전달인자 값의 제약

동적 전달인자는 null을 제외하고는 string으로 변환되어야 한다.  
특수 값 null을 사용하면 명시적으로 바인딩을 제거할 수 있다.  
그 외의 값은 경고를 출력한다.

##### 동적 전달인자 형식의 제약

동적 전달인자 형식에는 일부 문자상의 제약이 있다.  
HTML 속성명에 공백이나 따옴표와 같은 특정 문자가 유효하지 않기 때문이다.

복잡한 표현식은 computed 속성으로 대체하는 것이 좋다.

in-DOM 템플릿을 쓰면 브라우저가 강제로 속성명을 소문자로 만들기 때문에 속성명에 대문자를 넣지 않도록 한다.

##### JavaScript 표현식

템플릿 표현식은 샌드박스 처리되며 Math나 Date처럼 전역으로 사용 가능한 것에서만 접근이 가능하다.